# 아이템 10 : 단위 테스트를 만들어라

사실 코드를 안전하게 만드는 가장 궁극적인 방법은 다양한 종류의 테스트를 하는 것이다.

- 테스트의 목표는 사용자의 관점에서 애플리케이션 외부적으로 제대로 작동하는지 확인하는 것이 목표.

하지만 위 같은 테스트의 목표는 개발자에게 유용하지만 충분하진 않다.

- 해당 요소가 올바르게 작동한다는 것을 완전하게 보증할 순 없다.
- 개발 시점에서 빠르게 피드백 받을 수 없다.

이러한 문제를 해결하기 위해 단위 테스트가 필요하다.

### 단위 테스트

```kotlin
단위 테스트란?
특정기능들이 잘 작동되는지 의도된 대로 정확히 동작하는지 검증하는 테스트
```

- 단위 테스트는 개발자가 작성하며 개발자에게 유용하다.

```kotlin
@Test
fun 'fib works correctly for the first 2 positions'() {
    assertEquals(1, fib(0))
    assertEquals(1, fib(1))
}

// 피보나치 수를 계산하는 테스트 코드(단위 테스트)
```

단위 테스트는 일반적으로 다음과 같은 내용을 확인한다.

- 일반적인 유즈 케이스 : 요소가 사용될 거라고 예상되는 방법을 테스트
- 일반적인 오류 케이스와 잠재적인 문제 : 제대로 동작하지 않을 거라고 예상되는 일반적인 부분, 과거에 문제가 발생했던 부분 등을 테스트.
- 엣지 케이스와 잘못된 아규먼트 : Int의 경우 최대값을 넘긴경우, nullable인 경우 null을 사용하는 경우

### 단위 테스트의 장점

- 테스트가 잘 된 요소는 신뢰할 수 있다. 요소를 신뢰할 수 있으므로 요소를 활용한 작업에 자신감이 생김.
- 테스트가 잘 만들어져 있다면, 리팩터링하는 것이 두렵지 않다.
    - 테스트가 있으므로 리팩토링 했을 때 버그가 생기는지 쉽게 확인이 가능.
    - 테스트를 잘 만든 프로그램은 코드가 점점 발전함.

### 단위 테스트의 단점

- 테스트를 만드는 데 시간이 걸린다.
    - 다만, 장기적으로 봤을 때 디버깅 시간과 버그 찾는데 소모되는 시간을 줄여준다.
- 좋은 단위 테스트를 만드는 작업이 꽤 어렵다.

### 단위 테스트를 어느 부분에 적용해야할까?

다음과 같은 부분에서 단위 테스트 하는 방법을 알고 있어야 한다.

- 복잡한 부분
- 계속해서 수정이 일어나고 리팩터링이 일어날 수 있는 부분
- 비즈니스 로직
- 공용 API
- 등

### 정리

가장 중요한 것은 애플리케이션이 올바르게 동작하는지 확인하는 것이다. 테스트 중에서 개발 과정에 가장 효율적으로 활용할 수 있는 테스트가 단위 테스트이다. 

단위 테스트를 통해서 사용자에게 올바르게 동작하는 애플리케이션을 제공하는 것이 중요.

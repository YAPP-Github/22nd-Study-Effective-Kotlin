# 아이템 30 : 요소의 가시성을 최소화하라

클래스의 상태를 나타내는 프로퍼티를 외부에서 변경할 수 있다면, 클래스는 자신의 상태를 보장할 수 없다.

해당 클래스가 만족하는 규약이 있으므로, 이를 모르는 다른 사람들은 클래스의 상태를 마음대로 변경할 수 있음.

→ 클래스의 불변성이 무너질 가능성이 있다.

```kotlin
class Counter {
    var elementsAdded: Int = 0
        private set

    fun add(num: Int): Int {
        elementsAdded++
        return elementsAdded
    }
}
```

- 일반적으로 코틀린은 접근자의 가시성을 제한하여 모든 프로퍼티를 캡슐화하는 것이 좋다.
    - 외부에선 함수를 통해서 값을 핸들링
- 서로 의존하는 프로퍼티가 있을 땐 객채 상태를 보호하는 것이 더 중요하다.
    - 프로퍼티가 노출될 경우 예상하지 못한 변경에 의해 예외가 발생
- 가시성이 제한될수록 클래스의 변경을 쉽게 추적할 수 있고, 프로퍼티의 상태를 더 쉽게 이해할 수 있다.
    - 상태 변경은 병렬 프로그래밍에서 문제가 발생한다. 많은 것을 제한할수록 병렬 프로그래밍을 할 때 안전해짐.

### 가시성 한정자 사용하기

- public(디폴트) : 어디에서나 볼 수 있음
- private : 클래스 내부에서만 볼 수 있음
- protected : 클래스와 서브 클래스 내부에서만 볼 수 있음
    - 프로퍼티에만 적용 클래스에선X
- internal : 모듈 내부에서만 볼 수 있음

top level 요소에는 세가지 가시성 한정자를 사용할 수 있다.

- public(디폴트) : 어디에서나 볼 수 있음
- private : 같은 파일 내부에서만 볼 수 있음
- internal : 모듈 내부에서만 볼 수 있음

```kotlin
모듈이 다른 모듈에 의해 사용될 가능성이 있다면, internal을 사용할 것.
```

### 정리

가시성은 최대한 제한적인 것이 좋다

- 최대한 제한이 되어 있어야 변경하기 쉽다.
- 클래스의 상태를 나타내는 프로퍼티가 노출되어 있다면, 클래스가 자신의 상태를 책임질 수 없다.
- 가시성이 제한되면 API의 변경을 쉽게 추적할 수 있다.
